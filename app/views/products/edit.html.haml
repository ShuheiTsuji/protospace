= render "layouts/error", danger: @product
.container.proto-new
  = form_for (@product), html: {id: 'product'}  do |f|
    .col-md-8.col-md-offset-2
      %header.row.user-nav.row
        .col-md-12
          = f.text_field :title, placeholder: "title", class: "proto-new-title"
      .row
        .col-md-12
          .cover-image-upload
            #js-new_product_image0= image_tag("#{@product.images.main.first.image}")
            = f.fields_for :images, @product.images.main do |image|
              = image.file_field :image, id: "js-product_images_attributes_0_image"
              = image.hidden_field :role, value: :main
        .col-md-12
          %ul.proto-sub-list.list-group
          - @product.images.sub.each.with_index(1) do |word, index|
            %li.list-group-item.col-md-4
              .image-upload
                %div{id: "js-new_product_image#{index}"}= image_tag("#{word.image}")
                = f.fields_for :images, @product.images.sub.first do |image|
                  = image.file_field :image, id: "js-product_images_attributes_#{index}_image"
                  = image.hidden_field :role, value: :sub
          %li.list-group-item.col-md-4
            .image-upload-plus
              %span +
      .row.proto-description
        .col-md-12
          = f.text_field :catch_copy, placeholder: "Catch Copy"
        .col-md-12
          = f.text_area :concept, cols: "30", rows: "4", placeholder: "Concept"
        .col-md-12
          %h4 Tag List
          .row
            - 3.times do |i|
              .col-md-3
                = text_field_tag "product[tag][]", "#{ @product.tags[i].name }", placeholder: "Tag#{i + 1}"
      .row.text-center.proto-btn
        = f.submit "publish", class: "btn btn-lg btn-primary btn-block", data: { disable_with: "sending..." }



